<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
<title>HexMarket - é¢„æµ‹å¸‚åœº</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Noto+Sans+SC:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
<style>
  :root {
    --bg: #F5F6FA; --surface: #FFFFFF; --border: rgba(0,0,0,0.06); --border-s: rgba(0,0,0,0.10);
    --text: #1A1D2E; --text2: #6B7084; --text3: #9DA1B5;
    --green: #00A878; --green-bg: rgba(0,168,120,0.08); --green-bd: rgba(0,168,120,0.2);
    --red: #E5384F; --red-bg: rgba(229,56,79,0.08); --red-bd: rgba(229,56,79,0.2);
    --accent: #3366FF; --accent-bg: rgba(51,102,255,0.06); --accent-bd: rgba(51,102,255,0.15);
    --shadow: 0 1px 3px rgba(0,0,0,0.04), 0 4px 12px rgba(0,0,0,0.03);
    --shadow-h: 0 2px 8px rgba(0,0,0,0.06), 0 8px 24px rgba(0,0,0,0.05);
    --mono: 'DM Mono', monospace;
    --sans: 'Noto Sans SC', 'PingFang SC', -apple-system, sans-serif;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
  body { background: var(--bg); font-family: var(--sans); color: var(--text); overflow-x: hidden;
    padding-top: env(safe-area-inset-top, 0); }
  ::-webkit-scrollbar { display: none; }
  input, textarea { font-family: var(--sans); }
  input::placeholder, textarea::placeholder { color: #B8BCCE; }
  #root { max-width: 420px; margin: 0 auto; min-height: 100vh; min-height: 100dvh; position: relative; }

  /* Animations */
  @keyframes fadeUp { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
  @keyframes pulse { 0%,100% { transform: scale(1); } 50% { transform: scale(1.05); } }
  @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
  @keyframes confetti1 { 0% { transform: translateY(0) rotate(0deg); opacity:1; } 100% { transform: translateY(-120px) rotate(360deg) translateX(40px); opacity:0; } }
  @keyframes confetti2 { 0% { transform: translateY(0) rotate(0deg); opacity:1; } 100% { transform: translateY(-100px) rotate(-270deg) translateX(-30px); opacity:0; } }
  @keyframes confetti3 { 0% { transform: translateY(0) rotate(0deg); opacity:1; } 100% { transform: translateY(-140px) rotate(450deg) translateX(20px); opacity:0; } }
  .fade-up { animation: fadeUp 0.35s ease-out both; }
  .card-hover { transition: all 0.2s ease; }
  .card-hover:hover { box-shadow: var(--shadow-h); transform: translateY(-2px); }
  .card-hover:active { transform: scale(0.985); }
  .btn-press { transition: all 0.15s ease; }
  .btn-press:active { transform: scale(0.96); }
  .toast { position: fixed; top: 80px; left: 50%; transform: translateX(-50%); z-index: 2000;
    background: var(--text); color: #fff; padding: 12px 24px; border-radius: 12px;
    font-size: 14px; font-weight: 600; animation: fadeUp 0.3s ease-out; box-shadow: 0 8px 30px rgba(0,0,0,0.2); }
  .tg-bottom-nav { padding-bottom: calc(14px + env(safe-area-inset-bottom, 0px)) !important; }
  .tg-top-header { padding-top: calc(12px + var(--tg-safe-top, 0px)); }
</style>
</head>
<body>
<script>
  // Telegram Mini App initialization
  (function() {
    var tg = window.Telegram && window.Telegram.WebApp;
    if (tg) {
      tg.ready();
      tg.expand();
      if (tg.disableVerticalSwipes) {
        tg.disableVerticalSwipes();
      }
      if (tg.setHeaderColor) {
        tg.setHeaderColor('#F5F6FA');
      }
      if (tg.setBackgroundColor) {
        tg.setBackgroundColor('#F5F6FA');
      }
      // Expose for React
      window.__TG__ = tg;
    }
  })();
</script>
<div id="root"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<script type="text/babel">
const { useState, useEffect, useRef, useCallback } = React;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DATA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const INIT_MARKETS = [
  { id:1, title:"2026å¹´ä¸–ç•Œæ¯å†³èµ›ï¼šå·´è¥¿ vs æ³•å›½", category:"ä½“è‚²", emoji:"âš½", yesPrice:0.62, noPrice:0.38, volume:1285400, liquidity:456000, endDate:"2026-07-19", trending:true, change24h:0.05, description:"2026å¹´FIFAä¸–ç•Œæ¯å†³èµ›ä¸­ï¼Œå·´è¥¿é˜Ÿæ˜¯å¦ä¼šæˆ˜èƒœæ³•å›½é˜Ÿï¼Ÿ", comments:342, traders:8923, history:[0.45,0.48,0.52,0.55,0.50,0.53,0.58,0.60,0.57,0.62] },
  { id:2, title:"BTC 2026å¹´6æœˆçªç ´$150,000", category:"åŠ å¯†è´§å¸", emoji:"â‚¿", yesPrice:0.41, noPrice:0.59, volume:3842100, liquidity:1200000, endDate:"2026-06-30", trending:true, change24h:-0.03, description:"æ¯”ç‰¹å¸ä»·æ ¼æ˜¯å¦ä¼šåœ¨2026å¹´6æœˆ30æ—¥ä¹‹å‰è¾¾åˆ°$150,000ï¼Ÿ", comments:1205, traders:24510, history:[0.55,0.52,0.48,0.44,0.46,0.43,0.40,0.38,0.42,0.41] },
  { id:3, title:"OpenAI 2026å¹´Q2å‰å‘å¸ƒGPT-5", category:"ç§‘æŠ€", emoji:"ğŸ¤–", yesPrice:0.73, noPrice:0.27, volume:2156000, liquidity:780000, endDate:"2026-06-30", trending:false, change24h:0.02, description:"OpenAIæ˜¯å¦ä¼šåœ¨2026å¹´ç¬¬äºŒå­£åº¦ç»“æŸå‰æ­£å¼å‘å¸ƒGPT-5æ¨¡å‹ï¼Ÿ", comments:567, traders:12340, history:[0.60,0.63,0.65,0.68,0.66,0.70,0.71,0.69,0.72,0.73] },
  { id:4, title:"Aè‚¡ä¸Šè¯æŒ‡æ•°çªç ´4000ç‚¹", category:"é‡‘è", emoji:"ğŸ“ˆ", yesPrice:0.35, noPrice:0.65, volume:5621000, liquidity:2100000, endDate:"2026-12-31", trending:true, change24h:0.08, description:"ä¸Šè¯ç»¼åˆæŒ‡æ•°æ˜¯å¦ä¼šåœ¨2026å¹´å¹´åº•å‰çªç ´4000ç‚¹ï¼Ÿ", comments:2341, traders:45120, history:[0.20,0.22,0.25,0.28,0.26,0.30,0.32,0.29,0.33,0.35] },
  { id:5, title:"ç‰¹æ–¯æ‹‰å…¨è‡ªåŠ¨é©¾é©¶è·ä¸­å›½å®¡æ‰¹", category:"ç§‘æŠ€", emoji:"ğŸš—", yesPrice:0.18, noPrice:0.82, volume:987000, liquidity:340000, endDate:"2026-12-31", trending:false, change24h:-0.01, description:"ç‰¹æ–¯æ‹‰FSDå…¨è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿæ˜¯å¦ä¼šåœ¨2026å¹´è·å¾—ä¸­å›½ç›‘ç®¡éƒ¨é—¨çš„æ­£å¼å®¡æ‰¹ï¼Ÿ", comments:189, traders:5670, history:[0.25,0.23,0.20,0.22,0.19,0.21,0.18,0.17,0.19,0.18] },
  { id:6, title:"è‹±ä¼Ÿè¾¾å¸‚å€¼è¶…è¶Šè‹¹æœæˆå…¨çƒç¬¬ä¸€", category:"é‡‘è", emoji:"ğŸ’", yesPrice:0.56, noPrice:0.44, volume:1876000, liquidity:670000, endDate:"2026-12-31", trending:true, change24h:0.04, description:"è‹±ä¼Ÿè¾¾æ˜¯å¦ä¼šåœ¨2026å¹´å†…å¸‚å€¼è¶…è¶Šè‹¹æœæˆä¸ºå…¨çƒå¸‚å€¼æœ€é«˜çš„å…¬å¸ï¼Ÿ", comments:456, traders:9870, history:[0.40,0.43,0.45,0.48,0.50,0.52,0.49,0.53,0.55,0.56] },
  { id:7, title:"ä¸­å›½å¤®è¡Œ2026å¹´é™æ¯è¶…50ä¸ªåŸºç‚¹", category:"é‡‘è", emoji:"ğŸ¦", yesPrice:0.44, noPrice:0.56, volume:3245000, liquidity:1150000, endDate:"2026-12-31", trending:false, change24h:0.01, description:"ä¸­å›½äººæ°‘é“¶è¡Œæ˜¯å¦ä¼šåœ¨2026å¹´å†…ç´¯è®¡é™æ¯è¶…è¿‡50ä¸ªåŸºç‚¹ï¼Ÿ", comments:678, traders:15600, history:[0.38,0.40,0.42,0.41,0.43,0.45,0.44,0.42,0.43,0.44] },
  { id:8, title:"SpaceXæ˜Ÿèˆ°æˆåŠŸè½½äººç™»æœˆ", category:"ç§‘æŠ€", emoji:"ğŸš€", yesPrice:0.08, noPrice:0.92, volume:4521000, liquidity:1800000, endDate:"2026-12-31", trending:true, change24h:0.00, description:"SpaceXçš„æ˜Ÿèˆ°æ˜¯å¦ä¼šåœ¨2026å¹´å®Œæˆé¦–æ¬¡è½½äººç™»æœˆä»»åŠ¡ï¼Ÿ", comments:3210, traders:67800, history:[0.12,0.11,0.10,0.09,0.10,0.09,0.08,0.09,0.08,0.08] },
];

const INIT_POSITIONS = [
  { marketId:1, side:"yes", shares:150, avgPrice:0.55 },
  { marketId:2, side:"no", shares:200, avgPrice:0.52 },
  { marketId:4, side:"yes", shares:500, avgPrice:0.28 },
];

const LEADERBOARD = [
  { rank:1, name:"é‡åŒ–ä¹‹ç‹", avatar:"ğŸ‘‘", profit:128450, winRate:0.78, trades:342 },
  { rank:2, name:"å¸åœˆè€éŸ­èœ", avatar:"ğŸ¦", profit:95200, winRate:0.72, trades:256 },
  { rank:3, name:"é¢„è¨€å®¶å°æ˜", avatar:"ğŸ”®", profit:87600, winRate:0.69, trades:189 },
  { rank:4, name:"ä»·å€¼æŠ•èµ„è€…", avatar:"ğŸ“Š", profit:76300, winRate:0.65, trades:423 },
  { rank:5, name:"DeFiå¤§ç¥", avatar:"âš¡", profit:65800, winRate:0.71, trades:167 },
  { rank:6, name:"æˆ‘æ˜¯éŸ­èœ", avatar:"ğŸŒ¿", profit:54200, winRate:0.62, trades:534 },
  { rank:7, name:"æ¢­å“ˆé€‰æ‰‹", avatar:"ğŸ°", profit:43100, winRate:0.58, trades:89 },
  { rank:8, name:"ç¨³å¥æ´¾", avatar:"ğŸ›¡ï¸", profit:38900, winRate:0.74, trades:612 },
];

const CATEGORIES = ["å…¨éƒ¨","ğŸ”¥ çƒ­é—¨","åŠ å¯†è´§å¸","ç§‘æŠ€","é‡‘è","ä½“è‚²"];
const ACTIVITY_FEED = [
  { user:"é‡åŒ–ä¹‹ç‹", action:"ä¹°å…¥çœ‹æ¶¨", market:"BTCçªç ´$150K", amount:500, time:"2åˆ†é’Ÿå‰" },
  { user:"DeFiå¤§ç¥", action:"ä¹°å…¥çœ‹è·Œ", market:"Aè‚¡çªç ´4000", amount:200, time:"5åˆ†é’Ÿå‰" },
  { user:"é¢„è¨€å®¶å°æ˜", action:"ä¹°å…¥çœ‹æ¶¨", market:"GPT-5å‘å¸ƒ", amount:1000, time:"8åˆ†é’Ÿå‰" },
  { user:"å¸åœˆè€éŸ­èœ", action:"å–å‡ºçœ‹æ¶¨", market:"è‹±ä¼Ÿè¾¾è¶…è‹¹æœ", amount:300, time:"12åˆ†é’Ÿå‰" },
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• UTILS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const fmt = n => { if(n>=1e6) return (n/1e6).toFixed(1)+"M"; if(n>=1e3) return (n/1e3).toFixed(1)+"K"; return n+""; };

function MiniChart({ data, color, w=80, h=28 }) {
  const mn=Math.min(...data), mx=Math.max(...data), r=mx-mn||0.01;
  const pts = data.map((v,i)=>`${(i/(data.length-1))*w},${h-((v-mn)/r)*(h-4)-2}`).join(" ");
  // area fill
  const area = `0,${h} ${pts} ${w},${h}`;
  return (
    <svg width={w} height={h} style={{display:"block"}}>
      <polygon points={area} fill={color} fillOpacity="0.08" />
      <polyline points={pts} fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
    </svg>
  );
}

function ProbBar({yes}) {
  return (
    <div style={{display:"flex",borderRadius:99,overflow:"hidden",height:5,width:"100%",background:"var(--red-bg)"}}>
      <div style={{width:`${yes*100}%`,background:"linear-gradient(90deg,var(--green),#00C896)",transition:"width 0.6s ease",borderRadius:99}} />
    </div>
  );
}

function Toast({msg, onDone}) {
  useEffect(()=>{ const t=setTimeout(onDone,2200); return ()=>clearTimeout(t); },[]);
  return <div className="toast">{msg}</div>;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MARKET CARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function MarketCard({market, onClick, delay=0}) {
  const pos = market.change24h >= 0;
  return (
    <div className="card-hover fade-up" onClick={onClick}
      style={{background:"var(--surface)",borderRadius:16,padding:16,cursor:"pointer",
        border:"1px solid var(--border)",boxShadow:"var(--shadow)",position:"relative",overflow:"hidden",
        animationDelay:`${delay}ms`}}>
      {market.trending && (
        <div style={{position:"absolute",top:0,right:0,background:"linear-gradient(135deg,#FF6B35,#E5384F)",
          borderRadius:"0 16px 0 12px",padding:"4px 10px",fontSize:10,fontWeight:700,color:"#fff",letterSpacing:1}}>
          ğŸ”¥ HOT
        </div>
      )}
      <div style={{display:"flex",alignItems:"flex-start",gap:12,marginBottom:12}}>
        <div style={{fontSize:26,background:"var(--accent-bg)",width:44,height:44,borderRadius:12,
          display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}}>{market.emoji}</div>
        <div style={{flex:1,minWidth:0}}>
          <div style={{fontSize:10,color:"var(--text3)",fontWeight:600,letterSpacing:0.8,marginBottom:3,textTransform:"uppercase"}}>{market.category}</div>
          <div style={{fontSize:14,fontWeight:700,color:"var(--text)",lineHeight:1.4,
            display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"}}>{market.title}</div>
        </div>
      </div>
      <ProbBar yes={market.yesPrice} />
      <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:12}}>
        <div style={{display:"flex",gap:20}}>
          <div>
            <div style={{fontSize:10,color:"var(--text3)",marginBottom:1}}>çœ‹æ¶¨</div>
            <div style={{fontSize:18,fontWeight:800,color:"var(--green)",fontFamily:"var(--mono)"}}>{(market.yesPrice*100).toFixed(0)}Â¢</div>
          </div>
          <div>
            <div style={{fontSize:10,color:"var(--text3)",marginBottom:1}}>çœ‹è·Œ</div>
            <div style={{fontSize:18,fontWeight:800,color:"var(--red)",fontFamily:"var(--mono)"}}>{(market.noPrice*100).toFixed(0)}Â¢</div>
          </div>
        </div>
        <div style={{textAlign:"right",display:"flex",flexDirection:"column",alignItems:"flex-end",gap:3}}>
          <MiniChart data={market.history} color={pos?"var(--green)":"var(--red)"} />
          <div style={{fontSize:11,color:pos?"var(--green)":"var(--red)",fontWeight:700,fontFamily:"var(--mono)"}}>
            {pos?"+":""}{(market.change24h*100).toFixed(0)}%
          </div>
        </div>
      </div>
      <div style={{display:"flex",justifyContent:"space-between",marginTop:12,paddingTop:10,borderTop:"1px solid var(--border)"}}>
        <span style={{fontSize:11,color:"var(--text3)"}}>ğŸ“Š Â¥{fmt(market.volume)}</span>
        <span style={{fontSize:11,color:"var(--text3)"}}>ğŸ‘¥ {fmt(market.traders)}äºº</span>
        <span style={{fontSize:11,color:"var(--text3)"}}>â° {market.endDate}</span>
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MARKET DETAIL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function MarketDetail({market, positions, onBack, onTrade, onToast}) {
  const [side, setSide] = useState("yes");
  const [amount, setAmount] = useState("");
  const [showConfirm, setShowConfirm] = useState(false);
  const [chartRange, setChartRange] = useState(2);
  const [activeTab, setActiveTab] = useState("trade"); // trade | orderbook | activity

  const price = side==="yes"? market.yesPrice : market.noPrice;
  const shares = amount ? Math.floor(parseFloat(amount)/price) : 0;
  const profit = shares*1 - (parseFloat(amount)||0);
  const myPos = positions.filter(p=>p.marketId===market.id);

  const confirmTrade = () => {
    onTrade(market.id, side, shares, price, parseFloat(amount));
    setShowConfirm(false);
    setAmount("");
    onToast(`âœ… æˆåŠŸä¹°å…¥ ${shares} ä»½${side==="yes"?"çœ‹æ¶¨":"çœ‹è·Œ"}ï¼`);
  };

  // Simulated orderbook data
  const orderbook = {
    bids: [{p:0.61,q:1200},{p:0.60,q:3400},{p:0.59,q:2800},{p:0.58,q:5100},{p:0.57,q:1900}],
    asks: [{p:0.63,q:2100},{p:0.64,q:1800},{p:0.65,q:4200},{p:0.66,q:3100},{p:0.67,q:2400}],
  };

  return (
    <div style={{paddingBottom:100}} className="fade-up">
      {/* Header */}
      <div style={{display:"flex",alignItems:"center",gap:12,padding:"14px 0",borderBottom:"1px solid var(--border)"}}>
        <div onClick={onBack} className="btn-press"
          style={{width:36,height:36,borderRadius:10,background:"var(--bg)",display:"flex",alignItems:"center",
            justifyContent:"center",cursor:"pointer",fontSize:18,color:"var(--text2)",border:"1px solid var(--border)"}}>â†</div>
        <div style={{flex:1}}>
          <div style={{fontSize:11,color:"var(--text3)",fontWeight:600}}>{market.category}</div>
          <div style={{fontSize:15,fontWeight:700,color:"var(--text)"}}>{market.emoji} {market.title}</div>
        </div>
        <div className="btn-press" style={{padding:"6px 10px",borderRadius:8,background:"var(--accent-bg)",
          border:"1px solid var(--accent-bd)",cursor:"pointer",fontSize:12,color:"var(--accent)",fontWeight:600}}>
          ğŸ”— åˆ†äº«
        </div>
      </div>

      {/* Big price */}
      <div style={{padding:"20px 0",textAlign:"center"}}>
        <div style={{fontSize:11,color:"var(--text3)",marginBottom:4}}>å½“å‰æ¦‚ç‡</div>
        <div style={{fontSize:52,fontWeight:900,color:"var(--green)",fontFamily:"var(--mono)",letterSpacing:-2}}>
          {(market.yesPrice*100).toFixed(1)}%
        </div>
        <div style={{fontSize:13,color:market.change24h>=0?"var(--green)":"var(--red)",fontWeight:600}}>
          24h {market.change24h>=0?"â†‘":"â†“"} {Math.abs(market.change24h*100).toFixed(1)}%
        </div>
      </div>

      {/* Chart */}
      <div style={{background:"var(--surface)",borderRadius:16,padding:16,marginBottom:14,border:"1px solid var(--border)",boxShadow:"var(--shadow)"}}>
        <div style={{display:"flex",justifyContent:"space-between",marginBottom:14}}>
          {["1å¤©","1å‘¨","1æœˆ","å…¨éƒ¨"].map((t,i)=>(
            <div key={t} onClick={()=>setChartRange(i)} className="btn-press"
              style={{padding:"5px 14px",borderRadius:8,cursor:"pointer",fontSize:12,fontWeight:600,
                background:chartRange===i?"var(--green-bg)":"transparent",
                color:chartRange===i?"var(--green)":"var(--text3)",
                border:chartRange===i?"1px solid var(--green-bd)":"1px solid transparent"}}>{t}</div>
          ))}
        </div>
        <MiniChart data={market.history} color="var(--green)" w={340} h={90} />
        <div style={{display:"flex",justifyContent:"space-between",marginTop:8}}>
          <span style={{fontSize:10,color:"var(--text3)"}}>ä½: {(Math.min(...market.history)*100).toFixed(0)}%</span>
          <span style={{fontSize:10,color:"var(--text3)"}}>é«˜: {(Math.max(...market.history)*100).toFixed(0)}%</span>
        </div>
      </div>

      {/* Stats */}
      <div style={{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8,marginBottom:14}}>
        {[{l:"äº¤æ˜“é‡",v:`Â¥${fmt(market.volume)}`},{l:"æµåŠ¨æ€§",v:`Â¥${fmt(market.liquidity)}`},{l:"å‚ä¸è€…",v:`${fmt(market.traders)}äºº`}].map(s=>(
          <div key={s.l} style={{background:"var(--surface)",borderRadius:12,padding:12,textAlign:"center",border:"1px solid var(--border)"}}>
            <div style={{fontSize:10,color:"var(--text3)",marginBottom:3}}>{s.l}</div>
            <div style={{fontSize:14,fontWeight:700,color:"var(--text)",fontFamily:"var(--mono)"}}>{s.v}</div>
          </div>
        ))}
      </div>

      {/* Description */}
      <div style={{background:"var(--surface)",borderRadius:12,padding:14,marginBottom:14,border:"1px solid var(--border)"}}>
        <div style={{fontSize:13,color:"var(--text2)",lineHeight:1.7}}>{market.description}</div>
        <div style={{fontSize:11,color:"var(--text3)",marginTop:8}}>ğŸ—“ ç»“ç®—: {market.endDate} &nbsp; ğŸ’¬ {market.comments}è¯„è®º</div>
      </div>

      {/* My position in this market */}
      {myPos.length > 0 && (
        <div style={{background:"var(--accent-bg)",borderRadius:12,padding:14,marginBottom:14,border:"1px solid var(--accent-bd)"}}>
          <div style={{fontSize:12,fontWeight:700,color:"var(--accent)",marginBottom:8}}>ğŸ“Œ æˆ‘çš„æŒä»“</div>
          {myPos.map((p,i)=>{
            const pnl = (market[p.side==="yes"?"yesPrice":"noPrice"] - p.avgPrice) * p.shares;
            return (
              <div key={i} style={{display:"flex",justifyContent:"space-between",alignItems:"center"}}>
                <span style={{fontSize:13,color:"var(--text)"}}>
                  <span style={{color:p.side==="yes"?"var(--green)":"var(--red)",fontWeight:700}}>{p.side==="yes"?"çœ‹æ¶¨":"çœ‹è·Œ"}</span> Â· {p.shares}ä»½ Â· å‡ä»·{(p.avgPrice*100).toFixed(0)}Â¢
                </span>
                <span style={{fontSize:13,fontWeight:800,color:pnl>=0?"var(--green)":"var(--red)",fontFamily:"var(--mono)"}}>
                  {pnl>=0?"+":""}${pnl.toFixed(2)}
                </span>
              </div>
            );
          })}
        </div>
      )}

      {/* Tabs: Trade / Orderbook / Activity */}
      <div style={{display:"flex",gap:4,marginBottom:14,background:"var(--bg)",borderRadius:12,padding:3}}>
        {[{id:"trade",l:"ä¸‹æ³¨äº¤æ˜“"},{id:"orderbook",l:"è®¢å•ç°¿"},{id:"activity",l:"åŠ¨æ€"}].map(t=>(
          <div key={t.id} onClick={()=>setActiveTab(t.id)} className="btn-press"
            style={{flex:1,textAlign:"center",padding:"10px",borderRadius:10,cursor:"pointer",fontSize:13,fontWeight:600,
              background:activeTab===t.id?"var(--surface)":"transparent",
              color:activeTab===t.id?"var(--text)":"var(--text3)",
              boxShadow:activeTab===t.id?"var(--shadow)":"none",transition:"all 0.2s"}}>{t.l}</div>
        ))}
      </div>

      {/* Trade Panel */}
      {activeTab==="trade" && (
        <div style={{background:"var(--surface)",borderRadius:20,padding:20,border:"1px solid var(--border-s)",boxShadow:"var(--shadow)"}}>
          <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:16}}>
            <div onClick={()=>setSide("yes")} className="btn-press"
              style={{padding:14,borderRadius:12,cursor:"pointer",textAlign:"center",
                background:side==="yes"?"var(--green-bg)":"var(--bg)",
                border:side==="yes"?"2px solid var(--green)":"2px solid var(--border)",transition:"all 0.2s"}}>
              <div style={{fontSize:12,color:side==="yes"?"var(--green)":"var(--text3)",fontWeight:600}}>çœ‹æ¶¨ YES</div>
              <div style={{fontSize:24,fontWeight:900,color:"var(--green)",fontFamily:"var(--mono)"}}>{(market.yesPrice*100).toFixed(0)}Â¢</div>
            </div>
            <div onClick={()=>setSide("no")} className="btn-press"
              style={{padding:14,borderRadius:12,cursor:"pointer",textAlign:"center",
                background:side==="no"?"var(--red-bg)":"var(--bg)",
                border:side==="no"?"2px solid var(--red)":"2px solid var(--border)",transition:"all 0.2s"}}>
              <div style={{fontSize:12,color:side==="no"?"var(--red)":"var(--text3)",fontWeight:600}}>çœ‹è·Œ NO</div>
              <div style={{fontSize:24,fontWeight:900,color:"var(--red)",fontFamily:"var(--mono)"}}>{(market.noPrice*100).toFixed(0)}Â¢</div>
            </div>
          </div>
          <div style={{marginBottom:12}}>
            <div style={{fontSize:11,color:"var(--text3)",marginBottom:6,fontWeight:600}}>æŠ•å…¥é‡‘é¢ (USDT)</div>
            <div style={{display:"flex",alignItems:"center",background:"var(--bg)",borderRadius:12,border:"1px solid var(--border-s)",padding:"0 14px"}}>
              <span style={{color:"var(--text3)",fontSize:18,fontWeight:700}}>$</span>
              <input type="number" value={amount} onChange={e=>setAmount(e.target.value)} placeholder="0.00"
                style={{flex:1,background:"transparent",border:"none",outline:"none",color:"var(--text)",
                  fontSize:24,fontWeight:700,padding:"14px 8px",fontFamily:"var(--mono)"}} />
            </div>
            <div style={{display:"flex",gap:6,marginTop:8}}>
              {[10,50,100,500,1000].map(v=>(
                <div key={v} onClick={()=>setAmount(v+"")} className="btn-press"
                  style={{flex:1,textAlign:"center",padding:"8px 2px",borderRadius:8,background:amount===v+""?"var(--accent-bg)":"var(--bg)",
                    border:amount===v+""?"1px solid var(--accent-bd)":"1px solid var(--border)",
                    color:amount===v+""?"var(--accent)":"var(--text2)",fontSize:11,fontWeight:600,cursor:"pointer"}}>${v}</div>
              ))}
            </div>
          </div>
          {amount && parseFloat(amount)>0 && (
            <div style={{background:"var(--bg)",borderRadius:10,padding:12,marginBottom:16,border:"1px solid var(--border)"}}>
              {[{l:"è·å¾—ä»½é¢",v:`${shares} ä»½`,c:"var(--text)"},{l:"æ½œåœ¨æ”¶ç›Š",v:`+$${profit.toFixed(2)}`,c:"var(--green)"},{l:"å›æŠ¥ç‡",v:`${((profit/parseFloat(amount))*100).toFixed(0)}%`,c:"var(--green)"}].map((r,i)=>(
                <div key={r.l} style={{display:"flex",justifyContent:"space-between",marginBottom:i<2?6:0}}>
                  <span style={{fontSize:12,color:"var(--text3)"}}>{r.l}</span>
                  <span style={{fontSize:12,color:r.c,fontWeight:700,fontFamily:"var(--mono)"}}>{r.v}</span>
                </div>
              ))}
            </div>
          )}
          <div onClick={()=>{if(amount&&parseFloat(amount)>0)setShowConfirm(true);}} className="btn-press"
            style={{padding:16,borderRadius:14,textAlign:"center",fontWeight:800,fontSize:16,letterSpacing:1,
              cursor:amount&&parseFloat(amount)>0?"pointer":"default",color:"#fff",
              background:!amount||parseFloat(amount)<=0?"#C8CBD8":side==="yes"?"linear-gradient(135deg,#00A878,#00C896)":"linear-gradient(135deg,#D42E47,#E5384F)",
              opacity:amount&&parseFloat(amount)>0?1:0.6,transition:"all 0.2s",
              boxShadow:amount&&parseFloat(amount)>0?(side==="yes"?"0 6px 20px rgba(0,168,120,0.3)":"0 6px 20px rgba(229,56,79,0.3)"):"none"}}>
            {side==="yes"?"ğŸŸ¢ ä¹°å…¥çœ‹æ¶¨":"ğŸ”´ ä¹°å…¥çœ‹è·Œ"}
          </div>
        </div>
      )}

      {/* Orderbook */}
      {activeTab==="orderbook" && (
        <div style={{background:"var(--surface)",borderRadius:16,padding:16,border:"1px solid var(--border)"}}>
          <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16}}>
            <div>
              <div style={{fontSize:11,fontWeight:700,color:"var(--green)",marginBottom:8,textAlign:"center"}}>ä¹°ç›˜ (Bids)</div>
              {orderbook.bids.map((o,i)=>(
                <div key={i} style={{display:"flex",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid var(--border)",position:"relative"}}>
                  <div style={{position:"absolute",right:0,top:0,bottom:0,width:`${(o.q/5100)*100}%`,background:"var(--green-bg)",borderRadius:4}} />
                  <span style={{fontSize:12,fontWeight:600,color:"var(--green)",fontFamily:"var(--mono)",position:"relative"}}>{(o.p*100).toFixed(0)}Â¢</span>
                  <span style={{fontSize:12,color:"var(--text2)",fontFamily:"var(--mono)",position:"relative"}}>{fmt(o.q)}</span>
                </div>
              ))}
            </div>
            <div>
              <div style={{fontSize:11,fontWeight:700,color:"var(--red)",marginBottom:8,textAlign:"center"}}>å–ç›˜ (Asks)</div>
              {orderbook.asks.map((o,i)=>(
                <div key={i} style={{display:"flex",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid var(--border)",position:"relative"}}>
                  <div style={{position:"absolute",left:0,top:0,bottom:0,width:`${(o.q/4200)*100}%`,background:"var(--red-bg)",borderRadius:4}} />
                  <span style={{fontSize:12,fontWeight:600,color:"var(--red)",fontFamily:"var(--mono)",position:"relative"}}>{(o.p*100).toFixed(0)}Â¢</span>
                  <span style={{fontSize:12,color:"var(--text2)",fontFamily:"var(--mono)",position:"relative"}}>{fmt(o.q)}</span>
                </div>
              ))}
            </div>
          </div>
          <div style={{textAlign:"center",marginTop:12,fontSize:11,color:"var(--text3)"}}>
            ä»·å·®: {((orderbook.asks[0].p - orderbook.bids[0].p)*100).toFixed(0)}Â¢ Â· æ·±åº¦æ¨¡æ‹Ÿæ•°æ®
          </div>
        </div>
      )}

      {/* Activity */}
      {activeTab==="activity" && (
        <div style={{background:"var(--surface)",borderRadius:16,padding:16,border:"1px solid var(--border)"}}>
          {ACTIVITY_FEED.map((a,i)=>(
            <div key={i} style={{display:"flex",alignItems:"center",gap:10,padding:"10px 0",borderBottom:i<ACTIVITY_FEED.length-1?"1px solid var(--border)":"none"}}>
              <div style={{width:32,height:32,borderRadius:8,background:"var(--accent-bg)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14}}>
                {a.action.includes("æ¶¨")?"ğŸŸ¢":"ğŸ”´"}
              </div>
              <div style={{flex:1}}>
                <div style={{fontSize:13,color:"var(--text)"}}><b>{a.user}</b> {a.action}</div>
                <div style={{fontSize:11,color:"var(--text3)"}}>{a.market} Â· ${a.amount}</div>
              </div>
              <div style={{fontSize:11,color:"var(--text3)"}}>{a.time}</div>
            </div>
          ))}
        </div>
      )}

      {/* Confirm Modal */}
      {showConfirm && (
        <div style={{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.35)",
          display:"flex",alignItems:"flex-end",justifyContent:"center",zIndex:1000,backdropFilter:"blur(6px)"}}
          onClick={()=>setShowConfirm(false)}>
          <div onClick={e=>e.stopPropagation()}
            style={{background:"var(--surface)",borderRadius:"24px 24px 0 0",padding:"28px 24px 36px",
              width:"100%",maxWidth:420,boxShadow:"0 -10px 40px rgba(0,0,0,0.12)",animation:"slideUp 0.3s ease-out"}}>
            <div style={{width:40,height:4,borderRadius:2,background:"var(--border-s)",margin:"0 auto 20px"}} />
            <div style={{textAlign:"center",marginBottom:20}}>
              <div style={{fontSize:48,marginBottom:8}}>{side==="yes"?"ğŸ“ˆ":"ğŸ“‰"}</div>
              <div style={{fontSize:18,fontWeight:800,color:"var(--text)"}}>ç¡®è®¤ä¸‹æ³¨</div>
            </div>
            <div style={{background:"var(--bg)",borderRadius:12,padding:14,marginBottom:20}}>
              <div style={{fontSize:13,color:"var(--text2)",marginBottom:10,lineHeight:1.5}}>{market.title}</div>
              {[{l:"æ–¹å‘",v:side==="yes"?"çœ‹æ¶¨ YES":"çœ‹è·Œ NO",c:side==="yes"?"var(--green)":"var(--red)"},
                {l:"ä»·æ ¼",v:`${(price*100).toFixed(0)}Â¢`,c:"var(--text)"},
                {l:"é‡‘é¢",v:`$${amount}`,c:"var(--text)"},
                {l:"ä»½é¢",v:`${shares} ä»½`,c:"var(--text)"},
                {l:"æ½œåœ¨æ”¶ç›Š",v:`+$${profit.toFixed(2)} (${((profit/parseFloat(amount))*100).toFixed(0)}%)`,c:"var(--green)"},
              ].map(r=>(
                <div key={r.l} style={{display:"flex",justifyContent:"space-between",marginBottom:4}}>
                  <span style={{fontSize:13,color:"var(--text3)"}}>{r.l}</span>
                  <span style={{fontSize:13,fontWeight:700,color:r.c,fontFamily:"var(--mono)"}}>{r.v}</span>
                </div>
              ))}
            </div>
            <div style={{display:"grid",gridTemplateColumns:"1fr 2fr",gap:10}}>
              <div onClick={()=>setShowConfirm(false)} className="btn-press"
                style={{padding:16,borderRadius:14,textAlign:"center",cursor:"pointer",
                  background:"var(--bg)",color:"var(--text2)",fontWeight:700,fontSize:15,border:"1px solid var(--border)"}}>å–æ¶ˆ</div>
              <div onClick={confirmTrade} className="btn-press"
                style={{padding:16,borderRadius:14,textAlign:"center",cursor:"pointer",
                  background:side==="yes"?"linear-gradient(135deg,#00A878,#00C896)":"linear-gradient(135deg,#D42E47,#E5384F)",
                  color:"#fff",fontWeight:800,fontSize:15,
                  boxShadow:side==="yes"?"0 6px 20px rgba(0,168,120,0.3)":"0 6px 20px rgba(229,56,79,0.3)"}}>
                ç¡®è®¤ä¸‹æ³¨ Â· ${amount}
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PORTFOLIO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function Portfolio({markets, positions, balance, onSell, onToast}) {
  const totalValue = positions.reduce((a,p)=>{
    const m=markets.find(x=>x.id===p.marketId);
    return a + p.shares * (m ? m[p.side==="yes"?"yesPrice":"noPrice"] : 0);
  },0);
  const totalCost = positions.reduce((a,p)=>a+p.shares*p.avgPrice,0);
  const pnl = totalValue-totalCost;
  const wins = positions.filter(p=>{const m=markets.find(x=>x.id===p.marketId); return m&&(m[p.side==="yes"?"yesPrice":"noPrice"]-p.avgPrice)>=0;}).length;
  const winRate = positions.length>0 ? (wins/positions.length*100).toFixed(0) : 0;

  return (
    <div style={{paddingBottom:80}} className="fade-up">
      {/* Balance */}
      <div style={{background:"linear-gradient(135deg,#3366FF,#1A4FE0,#2855D9)",borderRadius:20,padding:24,marginBottom:14,
        position:"relative",overflow:"hidden",boxShadow:"0 8px 32px rgba(51,102,255,0.2)"}}>
        <div style={{position:"absolute",top:-30,right:-30,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.08)"}} />
        <div style={{position:"absolute",bottom:-20,left:-20,width:70,height:70,borderRadius:"50%",background:"rgba(255,255,255,0.05)"}} />
        <div style={{fontSize:12,color:"rgba(255,255,255,0.6)",marginBottom:4,fontWeight:600}}>è´¦æˆ·æ€»èµ„äº§</div>
        <div style={{fontSize:38,fontWeight:900,color:"#fff",fontFamily:"var(--mono)",marginBottom:4}}>${balance.toFixed(2)}</div>
        <div style={{display:"flex",alignItems:"center",gap:8}}>
          <span style={{fontSize:13,color:pnl>=0?"#86FFCE":"#FF9BAA",fontWeight:700,fontFamily:"var(--mono)"}}>
            {pnl>=0?"+":""}${pnl.toFixed(2)}
          </span>
          <span style={{fontSize:11,color:"rgba(255,255,255,0.45)"}}>æŒä»“ç›ˆäº</span>
        </div>
        <div style={{display:"flex",gap:10,marginTop:16}}>
          <div className="btn-press" style={{flex:1,padding:10,borderRadius:10,textAlign:"center",background:"rgba(255,255,255,0.18)",color:"#fff",fontWeight:700,fontSize:13,cursor:"pointer"}}>ğŸ’° å……å€¼</div>
          <div className="btn-press" style={{flex:1,padding:10,borderRadius:10,textAlign:"center",background:"rgba(255,255,255,0.08)",color:"rgba(255,255,255,0.8)",fontWeight:700,fontSize:13,cursor:"pointer"}}>ğŸ’¸ æç°</div>
        </div>
      </div>

      {/* Stats */}
      <div style={{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8,marginBottom:14}}>
        {[{l:"æŒä»“æ•°",v:positions.length,c:"var(--text)"},{l:"èƒœç‡",v:winRate+"%",c:"var(--green)"},{l:"æ€»äº¤æ˜“",v:positions.length+"",c:"var(--text)"}].map(s=>(
          <div key={s.l} style={{background:"var(--surface)",borderRadius:12,padding:12,textAlign:"center",border:"1px solid var(--border)",boxShadow:"var(--shadow)"}}>
            <div style={{fontSize:10,color:"var(--text3)",marginBottom:3}}>{s.l}</div>
            <div style={{fontSize:18,fontWeight:800,color:s.c,fontFamily:"var(--mono)"}}>{s.v}</div>
          </div>
        ))}
      </div>

      <div style={{fontSize:15,fontWeight:800,color:"var(--text)",marginBottom:12}}>æˆ‘çš„æŒä»“</div>
      {positions.length===0 && (
        <div style={{textAlign:"center",padding:"40px 0",color:"var(--text3)"}}>
          <div style={{fontSize:48,marginBottom:8}}>ğŸ“­</div>
          <div style={{fontSize:14}}>æš‚æ— æŒä»“ï¼Œå»ç«çŒœå¸‚åœºä¸‹æ³¨å§ï¼</div>
        </div>
      )}
      {positions.map((pos,idx)=>{
        const market=markets.find(m=>m.id===pos.marketId);
        if(!market) return null;
        const curPrice = market[pos.side==="yes"?"yesPrice":"noPrice"];
        const pnl2=(curPrice-pos.avgPrice)*pos.shares;
        const pnlPct=((curPrice-pos.avgPrice)/pos.avgPrice*100);
        return (
          <div key={idx} className="fade-up" style={{background:"var(--surface)",borderRadius:14,padding:16,marginBottom:8,
            border:"1px solid var(--border)",boxShadow:"var(--shadow)",animationDelay:`${idx*60}ms`}}>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:10}}>
              <div style={{flex:1,minWidth:0}}>
                <div style={{fontSize:13,fontWeight:700,color:"var(--text)",marginBottom:4}}>{market.emoji} {market.title}</div>
                <div style={{display:"inline-block",padding:"2px 8px",borderRadius:6,fontSize:10,fontWeight:700,
                  background:pos.side==="yes"?"var(--green-bg)":"var(--red-bg)",
                  color:pos.side==="yes"?"var(--green)":"var(--red)"}}>
                  {pos.side==="yes"?"çœ‹æ¶¨":"çœ‹è·Œ"} Â· {pos.shares}ä»½
                </div>
              </div>
              <div style={{textAlign:"right"}}>
                <div style={{fontSize:15,fontWeight:800,color:pnl2>=0?"var(--green)":"var(--red)",fontFamily:"var(--mono)"}}>
                  {pnl2>=0?"+":""}${pnl2.toFixed(2)}
                </div>
                <div style={{fontSize:11,color:pnl2>=0?"var(--green)":"var(--red)",fontFamily:"var(--mono)"}}>
                  {pnlPct>=0?"+":""}{pnlPct.toFixed(1)}%
                </div>
              </div>
            </div>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"center"}}>
              <div style={{display:"flex",gap:12}}>
                <span style={{fontSize:11,color:"var(--text3)"}}>å‡ä»· {(pos.avgPrice*100).toFixed(0)}Â¢</span>
                <span style={{fontSize:11,color:"var(--text3)"}}>ç°ä»· {(curPrice*100).toFixed(0)}Â¢</span>
              </div>
              <div onClick={()=>{onSell(idx); onToast("âœ… å·²å–å‡ºæŒä»“");}} className="btn-press"
                style={{padding:"5px 12px",borderRadius:8,fontSize:11,fontWeight:600,cursor:"pointer",
                  background:"var(--red-bg)",color:"var(--red)",border:"1px solid var(--red-bd)"}}>å–å‡º</div>
            </div>
          </div>
        );
      })}
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LEADERBOARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function LeaderboardView() {
  const [period, setPeriod] = useState(1);
  return (
    <div style={{paddingBottom:80}} className="fade-up">
      <div style={{textAlign:"center",padding:"16px 0 12px"}}>
        <div style={{fontSize:20,fontWeight:900,color:"var(--text)"}}>ğŸ† æ’è¡Œæ¦œ</div>
        <div style={{fontSize:12,color:"var(--text3)",marginTop:4}}>ç«çŒœé«˜æ‰‹æ”¶ç›Šæ’å</div>
      </div>
      <div style={{display:"flex",gap:4,marginBottom:16,background:"var(--bg)",borderRadius:10,padding:3}}>
        {["æ—¥æ¦œ","æœˆæ¦œ","æ€»æ¦œ"].map((t,i)=>(
          <div key={t} onClick={()=>setPeriod(i)} className="btn-press"
            style={{flex:1,textAlign:"center",padding:"8px",borderRadius:8,cursor:"pointer",fontSize:13,fontWeight:600,
              background:period===i?"var(--surface)":"transparent",color:period===i?"var(--text)":"var(--text3)",
              boxShadow:period===i?"var(--shadow)":"none",transition:"all 0.2s"}}>{t}</div>
        ))}
      </div>
      {/* Top 3 */}
      <div style={{display:"flex",justifyContent:"center",alignItems:"flex-end",gap:10,marginBottom:24}}>
        {[LEADERBOARD[1],LEADERBOARD[0],LEADERBOARD[2]].map((p,i)=>{
          const sz=[{h:80,s:44},{h:105,s:52},{h:70,s:40}];
          const bg=["linear-gradient(180deg,#E8E8EC,#F5F5F8)","linear-gradient(180deg,#FFF8DC,#FFFDF5)","linear-gradient(180deg,#F0E0D0,#FBF5EF)"];
          const bd=["#C0C0C044","#FFD70044","#CD7F3244"];
          const lb=["ğŸ¥ˆ","ğŸ¥‡","ğŸ¥‰"];
          return (
            <div key={p.rank} style={{textAlign:"center"}} className="fade-up" >
              <div style={{fontSize:sz[i].s,marginBottom:4}}>{p.avatar}</div>
              <div style={{width:80,height:sz[i].h,background:bg[i],borderRadius:"14px 14px 0 0",
                display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",
                paddingTop:8,border:`1px solid ${bd[i]}`,borderBottom:"none"}}>
                <div style={{fontSize:22}}>{lb[i]}</div>
                <div style={{fontSize:11,fontWeight:800,color:"var(--text)",marginTop:4}}>{p.name}</div>
                <div style={{fontSize:10,color:"var(--green)",fontWeight:700,fontFamily:"var(--mono)",marginTop:2}}>+Â¥{fmt(p.profit)}</div>
                <div style={{fontSize:9,color:"var(--text3)",marginTop:1}}>èƒœç‡{(p.winRate*100).toFixed(0)}%</div>
              </div>
            </div>
          );
        })}
      </div>
      {LEADERBOARD.slice(3).map((p,i)=>(
        <div key={p.rank} className="fade-up"
          style={{display:"flex",alignItems:"center",gap:12,padding:"14px 16px",background:"var(--surface)",
            borderRadius:12,marginBottom:6,border:"1px solid var(--border)",boxShadow:"var(--shadow)",
            animationDelay:`${i*50}ms`}}>
          <div style={{width:24,textAlign:"center",fontSize:14,fontWeight:800,color:"var(--text3)",fontFamily:"var(--mono)"}}>{p.rank}</div>
          <div style={{fontSize:28}}>{p.avatar}</div>
          <div style={{flex:1}}>
            <div style={{fontSize:14,fontWeight:700,color:"var(--text)"}}>{p.name}</div>
            <div style={{fontSize:11,color:"var(--text3)"}}>èƒœç‡ {(p.winRate*100).toFixed(0)}% Â· {p.trades}ç¬”</div>
          </div>
          <div style={{fontSize:14,fontWeight:800,color:"var(--green)",fontFamily:"var(--mono)"}}>+Â¥{fmt(p.profit)}</div>
        </div>
      ))}
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CREATE MARKET â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function CreateMarket({onCreateMarket, onToast}) {
  const [title,setTitle]=useState("");
  const [desc,setDesc]=useState("");
  const [endDate,setEndDate]=useState("");
  const [cat,setCat]=useState("ç§‘æŠ€");
  const [liq,setLiq]=useState(500);

  const emojis = {"åŠ å¯†è´§å¸":"â‚¿","ç§‘æŠ€":"ğŸ¤–","é‡‘è":"ğŸ“ˆ","ä½“è‚²":"âš½","æ”¿æ²»":"ğŸ›","å¨±ä¹":"ğŸ¬"};

  const handleCreate = () => {
    if(!title||!desc||!endDate) { onToast("âš ï¸ è¯·å¡«å†™å®Œæ•´ä¿¡æ¯"); return; }
    onCreateMarket({
      id: Date.now(), title, category: cat, emoji: emojis[cat]||"ğŸ¯",
      yesPrice:0.50, noPrice:0.50, volume:liq, liquidity:liq, endDate,
      trending:false, change24h:0, description:desc, comments:0, traders:1,
      history:[0.50,0.50,0.50,0.50,0.50,0.50,0.50,0.50,0.50,0.50],
    });
    onToast("ğŸ‰ ç«çŒœå¸‚åœºåˆ›å»ºæˆåŠŸï¼");
    setTitle(""); setDesc(""); setEndDate("");
  };

  return (
    <div style={{paddingBottom:80}} className="fade-up">
      <div style={{fontSize:20,fontWeight:900,color:"var(--text)",marginBottom:4,paddingTop:8}}>ğŸ¯ åˆ›å»ºç«çŒœ</div>
      <div style={{fontSize:12,color:"var(--text3)",marginBottom:20}}>å‘èµ·ä¸€ä¸ªæ–°çš„é¢„æµ‹å¸‚åœºï¼Œé‚€è¯·å¤§å®¶å‚ä¸</div>
      <div style={{display:"flex",flexDirection:"column",gap:14}}>
        <div>
          <div style={{fontSize:12,color:"var(--text2)",fontWeight:600,marginBottom:6}}>ç«çŒœæ ‡é¢˜ *</div>
          <input value={title} onChange={e=>setTitle(e.target.value)} placeholder="ä¾‹ï¼šETH 2026å¹´Q3å‰çªç ´ $10,000ï¼Ÿ"
            style={{width:"100%",background:"var(--surface)",border:"1px solid var(--border-s)",borderRadius:12,padding:"14px 16px",color:"var(--text)",fontSize:14,outline:"none"}} />
        </div>
        <div>
          <div style={{fontSize:12,color:"var(--text2)",fontWeight:600,marginBottom:6}}>è¯¦ç»†æè¿° *</div>
          <textarea value={desc} onChange={e=>setDesc(e.target.value)} rows={3} placeholder="æ˜ç¡®ç»“ç®—æ¡ä»¶å’Œåˆ¤å®šæ ‡å‡†..."
            style={{width:"100%",background:"var(--surface)",border:"1px solid var(--border-s)",borderRadius:12,padding:"14px 16px",color:"var(--text)",fontSize:14,outline:"none",resize:"none"}} />
        </div>
        <div>
          <div style={{fontSize:12,color:"var(--text2)",fontWeight:600,marginBottom:6}}>åˆ†ç±»</div>
          <div style={{display:"flex",flexWrap:"wrap",gap:6}}>
            {Object.keys(emojis).map(c=>(
              <div key={c} onClick={()=>setCat(c)} className="btn-press"
                style={{padding:"8px 14px",borderRadius:10,cursor:"pointer",fontSize:13,fontWeight:600,
                  background:cat===c?"var(--accent-bg)":"var(--surface)",
                  border:cat===c?`1px solid var(--accent)`:`1px solid var(--border)`,
                  color:cat===c?"var(--accent)":"var(--text3)",transition:"all 0.2s"}}>{emojis[c]} {c}</div>
            ))}
          </div>
        </div>
        <div>
          <div style={{fontSize:12,color:"var(--text2)",fontWeight:600,marginBottom:6}}>ç»“ç®—æ—¥æœŸ *</div>
          <input type="date" value={endDate} onChange={e=>setEndDate(e.target.value)}
            style={{width:"100%",background:"var(--surface)",border:"1px solid var(--border-s)",borderRadius:12,padding:"14px 16px",color:"var(--text)",fontSize:14,outline:"none"}} />
        </div>
        <div>
          <div style={{fontSize:12,color:"var(--text2)",fontWeight:600,marginBottom:6}}>åˆå§‹æµåŠ¨æ€§ (USDT)</div>
          <div style={{display:"flex",gap:6}}>
            {[100,500,1000,5000].map(v=>(
              <div key={v} onClick={()=>setLiq(v)} className="btn-press"
                style={{flex:1,padding:12,borderRadius:10,textAlign:"center",cursor:"pointer",
                  background:liq===v?"var(--accent-bg)":"var(--surface)",
                  border:liq===v?`1px solid var(--accent-bd)`:`1px solid var(--border)`,
                  color:liq===v?"var(--accent)":"var(--text2)",fontSize:13,fontWeight:700,fontFamily:"var(--mono)"}}>${v}</div>
            ))}
          </div>
        </div>

        {/* Preview */}
        {title && (
          <div style={{background:"var(--bg)",borderRadius:14,padding:14,border:"1px solid var(--border)"}}>
            <div style={{fontSize:11,color:"var(--text3)",fontWeight:600,marginBottom:6}}>é¢„è§ˆ</div>
            <div style={{display:"flex",gap:10,alignItems:"center"}}>
              <div style={{fontSize:24,background:"var(--accent-bg)",width:40,height:40,borderRadius:10,display:"flex",alignItems:"center",justifyContent:"center"}}>{emojis[cat]||"ğŸ¯"}</div>
              <div>
                <div style={{fontSize:13,fontWeight:700,color:"var(--text)"}}>{title}</div>
                <div style={{fontSize:11,color:"var(--text3)"}}>{cat} Â· 50/50 Â· {endDate||"å¾…è®¾ç½®"}</div>
              </div>
            </div>
          </div>
        )}

        <div onClick={handleCreate} className="btn-press"
          style={{padding:16,borderRadius:14,textAlign:"center",cursor:"pointer",
            background:"linear-gradient(135deg,var(--accent),#1A4FE0)",
            color:"#fff",fontWeight:800,fontSize:16,marginTop:4,letterSpacing:1,
            boxShadow:"0 6px 24px rgba(51,102,255,0.25)"}}>
          ğŸš€ åˆ›å»ºç«çŒœå¸‚åœº
        </div>
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• APP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function App() {
  const [tab, setTab] = useState("market");
  const [selectedMarket, setSelectedMarket] = useState(null);
  const [category, setCategory] = useState("å…¨éƒ¨");
  const [searchQuery, setSearchQuery] = useState("");
  const [markets, setMarkets] = useState(INIT_MARKETS);
  const [positions, setPositions] = useState(INIT_POSITIONS);
  const [balance, setBalance] = useState(2486.50);
  const [toast, setToast] = useState(null);

  // Live price simulation
  useEffect(()=>{
    const iv = setInterval(()=>{
      setMarkets(prev=>prev.map(m=>{
        const delta = (Math.random()-0.5)*0.02;
        let newYes = Math.max(0.02, Math.min(0.98, m.yesPrice + delta));
        return {...m, yesPrice: Math.round(newYes*100)/100, noPrice: Math.round((1-newYes)*100)/100,
          history: [...m.history.slice(1), newYes],
          volume: m.volume + Math.floor(Math.random()*5000),
          traders: m.traders + Math.floor(Math.random()*3)};
      }));
    }, 3000);
    return ()=>clearInterval(iv);
  },[]);

  // Telegram BackButton integration
  useEffect(()=>{
    const tg = window.__TG__;
    if (!tg || !tg.BackButton) return;
    if (selectedMarket) {
      tg.BackButton.show();
      const handler = ()=> setSelectedMarket(null);
      tg.BackButton.onClick(handler);
      return ()=> { tg.BackButton.offClick(handler); tg.BackButton.hide(); };
    } else {
      tg.BackButton.hide();
    }
  },[selectedMarket]);

  const handleTrade = (marketId, side, shares, price, cost) => {
    setBalance(b=>b-cost);
    setPositions(prev=>{
      const existing = prev.findIndex(p=>p.marketId===marketId && p.side===side);
      if(existing>=0) {
        const p=prev[existing];
        const totalShares = p.shares+shares;
        const newAvg = (p.avgPrice*p.shares + price*shares)/totalShares;
        const updated=[...prev];
        updated[existing]={...p,shares:totalShares,avgPrice:newAvg};
        return updated;
      }
      return [...prev,{marketId,side,shares,avgPrice:price}];
    });
  };

  const handleSell = (idx) => {
    const pos = positions[idx];
    const m = markets.find(x=>x.id===pos.marketId);
    if(!m) return;
    const curPrice = m[pos.side==="yes"?"yesPrice":"noPrice"];
    setBalance(b=>b+pos.shares*curPrice);
    setPositions(prev=>prev.filter((_,i)=>i!==idx));
  };

  const handleCreateMarket = (newMarket) => {
    setMarkets(prev=>[newMarket,...prev]);
    setTab("market");
  };

  const filtered = markets.filter(m=>{
    const mc = category==="å…¨éƒ¨"||(category==="ğŸ”¥ çƒ­é—¨"?m.trending:m.category===category);
    const ms = !searchQuery||m.title.toLowerCase().includes(searchQuery.toLowerCase());
    return mc&&ms;
  });

  const tabs = [{id:"market",l:"ç«çŒœ",icon:"ğŸ”®"},{id:"portfolio",l:"æŒä»“",icon:"ğŸ’¼"},{id:"rank",l:"æ’è¡Œ",icon:"ğŸ†"},{id:"create",l:"å‘èµ·",icon:"â•"}];

  // Update selectedMarket with live data
  const liveMarket = selectedMarket ? markets.find(m=>m.id===selectedMarket.id) : null;

  return (
    <React.Fragment>
      {toast && <Toast msg={toast} onDone={()=>setToast(null)} />}

      {/* Header */}
      <div style={{padding:"12px 16px",background:"rgba(245,246,250,0.92)",backdropFilter:"blur(20px)",
        borderBottom:"1px solid var(--border)",position:"sticky",top:0,zIndex:100,
        display:"flex",alignItems:"center",justifyContent:"space-between"}}>
        <div style={{display:"flex",alignItems:"center",gap:10}}>
          <div style={{width:34,height:34,borderRadius:10,overflow:"hidden",
            display:"flex",alignItems:"center",justifyContent:"center"}}><img src="data:image/jpeg;base64,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" style={{width:34,height:34,borderRadius:10,objectFit:"cover"}} /></div>
          <div>
            <div style={{fontSize:15,fontWeight:800,color:"var(--text)",letterSpacing:0.5}}>HexMarket</div>
            <div style={{fontSize:10,color:"var(--text3)"}}>é¢„æµ‹å¸‚åœº</div>
          </div>
        </div>
        <div style={{background:"var(--green-bg)",borderRadius:10,padding:"6px 12px",display:"flex",alignItems:"center",gap:4,border:"1px solid var(--green-bd)"}}>
          <div style={{width:6,height:6,borderRadius:"50%",background:"var(--green)"}} />
          <span style={{fontSize:12,fontWeight:700,color:"var(--green)",fontFamily:"var(--mono)"}}>${balance.toFixed(0)}</span>
        </div>
      </div>

      {/* Content */}
      <div style={{padding:"0 16px",paddingTop:12}}>
        {tab==="market"&&!liveMarket&&(
          <React.Fragment>
            <div style={{background:"var(--surface)",borderRadius:12,padding:"10px 14px",marginBottom:12,
              display:"flex",alignItems:"center",gap:8,border:"1px solid var(--border)",boxShadow:"var(--shadow)"}}>
              <span style={{fontSize:16,opacity:0.4}}>ğŸ”</span>
              <input value={searchQuery} onChange={e=>setSearchQuery(e.target.value)}
                placeholder="æœç´¢ç«çŒœå¸‚åœº..."
                style={{flex:1,background:"transparent",border:"none",outline:"none",color:"var(--text)",fontSize:14}} />
              {searchQuery && <span onClick={()=>setSearchQuery("")} style={{cursor:"pointer",color:"var(--text3)",fontSize:16}}>âœ•</span>}
            </div>
            <div style={{display:"flex",gap:6,marginBottom:14,overflowX:"auto",paddingBottom:4}}>
              {CATEGORIES.map(c=>(
                <div key={c} onClick={()=>setCategory(c)} className="btn-press"
                  style={{padding:"6px 14px",borderRadius:10,whiteSpace:"nowrap",
                    background:category===c?"var(--accent-bg)":"var(--surface)",
                    border:category===c?"1px solid var(--accent-bd)":"1px solid var(--border)",
                    color:category===c?"var(--accent)":"var(--text3)",
                    fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s"}}>{c}</div>
              ))}
            </div>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10}}>
              <span style={{fontSize:11,color:"var(--text3)"}}>å…± {filtered.length} ä¸ªç«çŒœå¸‚åœº</span>
              <span style={{fontSize:11,color:"var(--green)",fontWeight:600}}>â— å®æ—¶æ›´æ–°ä¸­</span>
            </div>
            <div style={{display:"flex",flexDirection:"column",gap:10,paddingBottom:80}}>
              {filtered.map((m,i)=>(
                <MarketCard key={m.id} market={m} onClick={()=>setSelectedMarket(m)} delay={i*50} />
              ))}
              {filtered.length===0 && (
                <div style={{textAlign:"center",padding:"40px 0",color:"var(--text3)"}}>
                  <div style={{fontSize:48,marginBottom:8}}>ğŸ”</div>
                  <div style={{fontSize:14}}>æœªæ‰¾åˆ°ç›¸å…³å¸‚åœº</div>
                </div>
              )}
            </div>
          </React.Fragment>
        )}
        {tab==="market"&&liveMarket&&(
          <MarketDetail market={liveMarket} positions={positions}
            onBack={()=>setSelectedMarket(null)} onTrade={handleTrade} onToast={setToast} />
        )}
        {tab==="portfolio"&&<Portfolio markets={markets} positions={positions} balance={balance} onSell={handleSell} onToast={setToast} />}
        {tab==="rank"&&<LeaderboardView />}
        {tab==="create"&&<CreateMarket onCreateMarket={handleCreateMarket} onToast={setToast} />}
      </div>

      {/* Bottom Nav */}
      <div className="tg-bottom-nav" style={{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:420,
        background:"rgba(245,246,250,0.92)",backdropFilter:"blur(20px)",borderTop:"1px solid var(--border)",
        padding:"8px 0 14px",display:"flex",justifyContent:"space-around",zIndex:100}}>
        {tabs.map(t=>(
          <div key={t.id} onClick={()=>{setTab(t.id);setSelectedMarket(null);}} className="btn-press"
            style={{display:"flex",flexDirection:"column",alignItems:"center",gap:2,
              cursor:"pointer",padding:"4px 16px",borderRadius:12,transition:"all 0.2s"}}>
            <span style={{fontSize:22,filter:tab===t.id?"none":"grayscale(0.6) opacity(0.45)",transition:"all 0.2s"}}>{t.icon}</span>
            <span style={{fontSize:10,fontWeight:700,color:tab===t.id?"var(--accent)":"var(--text3)"}}>{t.l}</span>
            {tab===t.id&&<div style={{width:16,height:2.5,borderRadius:2,background:"var(--accent)",marginTop:1}} />}
            {t.id==="portfolio"&&positions.length>0&&(
              <div style={{position:"absolute",top:2,right:8,width:16,height:16,borderRadius:"50%",
                background:"var(--red)",fontSize:9,color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700}}>
                {positions.length}
              </div>
            )}
          </div>
        ))}
      </div>
    </React.Fragment>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>